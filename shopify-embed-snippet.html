<style>
  :root {
    --oftbox-header-offset: 80px;
    --oftbox-header-gap: 20px;
    --oftbox-header-padding-y: 12px;
  }

  html, body { height: 100%; margin: 0; overflow: hidden !important; }

  header,
  .header-wrapper,
  .shopify-section-header,
  .site-header,
  div[class*="header"] {
    background-color: #ffffff !important;
    background: #ffffff !important;
    position: relative;
    z-index: 2147483647 !important;
    overflow: visible !important;
  }

  header,
  .header-wrapper,
  .shopify-section-header {
    padding-top: var(--oftbox-header-padding-y);
    padding-bottom: var(--oftbox-header-padding-y);
    min-height: calc(var(--oftbox-header-offset) - (var(--oftbox-header-padding-y) * 2));
    box-sizing: border-box;
  }

  .header__heading-logo,
  .site-header__logo-image,
  header img[alt*="Box"],
  a.header__heading-link img {
    max-height: calc(var(--oftbox-header-offset, 80px) - (var(--oftbox-header-padding-y, 12px) * 2));
    height: auto;
    width: auto;
    object-fit: contain;
    display: inline-block;
    vertical-align: middle;
  }

  .header__icon,
  .header__icons,
  .header__heading,
  .header__heading-link,
  details[open] > summary {
    background-color: #ffffff !important;
  }

  .menu-drawer,
  .menu-drawer__inner-container,
  .menu-drawer__menu,
  .menu-drawer__navigation-container {
    background-color: #ffffff !important;
    z-index: 2147483648 !important;
  }

  .header__menu-drawer,
  .menu-drawer__overlay {
    z-index: 2147483648 !important;
  }

  .oftbox-wrapper {
    position: fixed !important;
    left: 0; right: 0; bottom: 0;
    top: calc(var(--oftbox-header-offset, 80px) + var(--oftbox-header-gap, 20px));
    z-index: 2147483640 !important;
    background: #f4f6f8;
    overflow: hidden;
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  .oftbox-iframe { width: 100%; height: 100%; border: none; display: block; background: #f4f6f8; }
</style>
<div class="oftbox-wrapper" id="oftboxApp">
  <iframe id="oftboxIframe" class="oftbox-iframe" src="https://oftboxsaas.pages.dev" title="OFTBOX Sales Command Center"></iframe>
</div>

<script>
(function() {
  const HEADER_SELECTORS = [
    '.header-wrapper',
    'header',
    '.shopify-section-header',
    '.site-header'
  ];

  let headerObserver;
  let currentHeader;

  function findHeader() {
    for (const selector of HEADER_SELECTORS) {
      const el = document.querySelector(selector);
      if (el) return el;
    }
    return null;
  }

  function setHeaderOffset(headerEl) {
    const height = headerEl
      ? Math.ceil(headerEl.getBoundingClientRect().height)
      : 80;
    document.documentElement.style.setProperty('--oftbox-header-offset', `${height}px`);
  }

  function observeHeader(headerEl) {
    if (headerObserver) headerObserver.disconnect();
    if (!headerEl || typeof ResizeObserver === 'undefined') return;
    headerObserver = new ResizeObserver(() => setHeaderOffset(headerEl));
    headerObserver.observe(headerEl);
  }

  function initApp() {
    const headerEl = findHeader();
    if (headerEl !== currentHeader) {
      currentHeader = headerEl;
      setHeaderOffset(headerEl);
      observeHeader(headerEl);
    } else {
      setHeaderOffset(headerEl);
    }
  }

  initApp();
  window.addEventListener('load', initApp);
  window.addEventListener('resize', initApp);

  let attempts = 0;
  const interval = setInterval(function() {
    initApp();
    attempts++;
    if (attempts > 10) clearInterval(interval);
  }, 300);
})();
</script>
